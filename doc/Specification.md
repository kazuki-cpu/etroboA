# この資料について
- 現ソフトウェアバージョンにおける各種仕様を記載します
- メモ程度で良いので、追加修正してもらえると嬉しいです

# タスクの関係性
- main_taskが最初に呼ばれる
- calibration_taskはキャリブレーション時のみ使用する
- tracer_taskは黒線に追従する機能を提供する

# 動作開始待ち機能
- シミュレータ環境が起動する前に、メインタスクが呼ばれてしまう
- シミュレータ環境が起動するまで、メインタスクを停止する処理を追加した
- シミュレータ環境が起動し、準備が完了すると、シミュレータ側からタッチセンサの押下が実施される
- タッチセンサの押下をトリガーとして、機体の動作を開始する
- 実機環境では、SPIKEのBlueToothボタンがタッチセンサの代わりとなっているため、BlueToothボタンを押下する機体が動作開始する
- 
# タスク呼び出し周期の調整
- 原因不明だが、タスク呼び出し周期を100msで設定しても60msになってしまう
- タスク呼び出し周期を(100/0.6)msに設定することで、100ms周期で呼ばれるように調整した

# キャリブレーション機能
- 競技開始時（シミュレータ準備完了、または実機の開始ボタン押下）に、キャリブレーションを実施する
- キャリブレーションの目的は、競技環境ごとの反射光センサの違いを吸収するため
- 機体直下が黒い地面の時はセンサの値が小さく、白い地面のときはセンサの値が大きい
- 競技開始時に、スタート地点の黒線を横断する事により、黒い地面と白い地面のセンサの値を一定時間取得する
- 取得したセンサの値の最大値と最小値を保持し、その平均のセンサの値を目標値とする
- ライントレース時は目標値にできるだけ近づくように、モーターを制御する
- メインタスクにて黒線を横断するモーター処理を実施する
- キャリブレーションタスクにて、センサの値を取得する
- キャリブレーションタスクはメインタスクの実行と並行して、センサの値を取得し、最大値、最小値を、目標値を計算する
- 黒線を横断する前にメインタスクがキャリブレーションタスクを起動する
- 黒線を横断し、機体の位置を戻した後は、メインタスクがキャリブレーションタスクを終了させる
- キャリブレーション結果（最大値、最小値、目標値）は、グローバル関数としてapp.cに定義する
